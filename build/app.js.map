{"version":3,"sources":["webpack:///webpack/bootstrap 052c84a771feed8c7a43","webpack:///./src/lib/ele.ts","webpack:///./src/lib/point.ts","webpack:///./src/lib/img-drag-zoom-ele.ts","webpack:///./src/lib/model.ts","webpack:///./src/lib/ele-dragger.ts","webpack:///./src/lib/ele-zoomer.ts","webpack:///./src/lib/zoom1d.ts","webpack:///./src/lib/div-ele.ts","webpack:///./src/app.ts","webpack:///./src/lib/img-ele.ts","webpack:///./src/lib/video-drag-zoom-ele.ts","webpack:///./src/lib/video-ele.ts","webpack:///./src/lib/axis-ele.ts","webpack:///./src/lib/web-app.ts","webpack:///./src/controls.ts","webpack:///./src/lib/button-ele.ts","webpack:///./src/lib/text-area-ele.ts"],"names":[],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 052c84a771feed8c7a43","\r\nexport class Ele {\r\n    target: HTMLElement;\r\n\r\n    get style(): CSSStyleDeclaration { return this.target.style; }\r\n\r\n    children: Array<Ele> = [];\r\n\r\n    constructor() {}\r\n\r\n    addChild(child: Ele) {\r\n        this.children.push(child);\r\n        this.target.appendChild(child.target);\r\n    }\r\n\r\n    // Add a child that isn't in the children list and won't get unloaded.\r\n    addUntrackedChild(child: Ele) {\r\n        this.target.appendChild(child.target);\r\n    }\r\n\r\n    addChildren(children: Array<Ele>) {\r\n        children.forEach((child: Ele) => this.addChild(child));\r\n    }\r\n\r\n    removeChild(child: Ele) {\r\n        this.target.removeChild(child.target);\r\n        this.children.splice(this.children.indexOf(child), 1);\r\n        child._unload();\r\n    }\r\n\r\n    _unload() {\r\n        this.children.forEach(child => child.unload);\r\n        this.children = [];\r\n        this.unload();\r\n    }\r\n\r\n    // Derived classes override this if you need to cancel any timers\r\n    unload() {\r\n\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ele.ts","\r\nexport class Point {\r\n    constructor(public x: number = 0, public y: number = 0) {}\r\n\r\n    updateFromMouseEvent(e: MouseEvent): void {\r\n        this.x = e.clientX;\r\n        this.y = e.clientY;\r\n    }\r\n\r\n    copy(): Point {\r\n        return new Point(this.x, this.y);\r\n    }\r\n\r\n    bumpBy(other): void {\r\n        this.x = this.x + other.x;\r\n        this.y = this.y + other.y;\r\n    }\r\n\r\n    add(other: Point): Point {\r\n        return new Point(this.x + other.x, this.y + other.y);\r\n    }\r\n\r\n    subtract(other: Point): Point {\r\n        return new Point(this.x - other.x, this.y - other.y);\r\n    }\r\n\r\n    toModel(): Point {\r\n        return this.copy();\r\n    }\r\n}\r\n\r\nexport class PointAverager {\r\n    get average(): Point {\r\n        let xSum = 0;\r\n        let ySum = 0;\r\n\r\n        this._averageBuffer.forEach((point: Point) => {\r\n            xSum += point.x;\r\n            ySum += point.y;\r\n        });\r\n\r\n        if (this._averageBuffer.length === 0) {\r\n            return new Point();\r\n        } else {\r\n            return new Point(\r\n                xSum / this._averageBuffer.length, \r\n                ySum / this._averageBuffer.length);\r\n        }\r\n    }\r\n\r\n    push(p: Point) {\r\n        this._averageBuffer.push(p.copy());\r\n        if (this._averageBuffer.length > this._averageBufferSize) {\r\n            this._averageBuffer.splice(0, 1);\r\n        }\r\n    }\r\n\r\n    clear() {\r\n        this._averageBuffer = [];\r\n    }\r\n\r\n    private _averageBuffer: Array<Point> = [];\r\n    private _averageBufferSize = 10;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/point.ts","\r\nimport {ImgEle, ImgEleModel} from \"./img-ele\";\r\nimport {Point} from \"./point\"\r\n\r\nimport {EleDragger} from \"./ele-dragger\";\r\nimport {EleZoomer} from \"./ele-zoomer\";\r\nimport {Model} from \"./model\";\r\n\r\nexport class ImgDragZoomEle extends ImgEle {\r\n\r\n    get pos(): Point { return this._pos; }\r\n    dragger: EleDragger;\r\n    zoomer: EleZoomer;\r\n\r\n    constructor(src: string = null, onRemoved: (i: ImgEle) => void) {\r\n        super(src, onRemoved);\r\n\r\n        this._pos = new Point(0, 0);\r\n        this.dragger = new EleDragger(this, this._pos);\r\n        this.zoomer = new EleZoomer(this, this._pos);\r\n\r\n        this.imgElement.addEventListener(\"load\", ()=>this._onLoaded());\r\n    }\r\n\r\n    toModel(): Model {\r\n        return new ImgDragZoomEleModel(\r\n            this._pos.toModel(),\r\n            this.zoomer.size.toModel(),\r\n            super.toModel() as ImgEleModel);\r\n    }\r\n    \r\n    static fromModel(model: ImgDragZoomEleModel, onRemoved: (i: ImgEle) => void): ImgDragZoomEle {\r\n        let img = new ImgDragZoomEle(model.imgEleModel.src, onRemoved);\r\n        img._pos.x = model.pos.x;\r\n        img._pos.y = model.pos.y;\r\n        img.dragger.setPos(img._pos);\r\n        img.zoomer.setSize(new Point(model.size.x, model.size.y));\r\n        return img;\r\n    }\r\n\r\n    private _onLoaded() {\r\n        if (this.zoomer.size.x === 0) {\r\n            this.zoomer.setSize(new Point(this.imgElement.naturalWidth, this.imgElement.naturalHeight));\r\n        }\r\n    }\r\n\r\n    private _pos: Point;\r\n}\r\n\r\nexport class ImgDragZoomEleModel extends Model {\r\n    constructor(\r\n        public pos: Point,\r\n        public size: Point,\r\n        public imgEleModel: ImgEleModel) {\r\n            super();\r\n        }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/img-drag-zoom-ele.ts","\r\nexport class Model {\r\n    \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/model.ts","\r\nimport {Ele} from \"./ele\";\r\nimport {Point, PointAverager} from \"./point\"\r\nimport {Keys} from \"./keys\"\r\n\r\nexport class EleDragger {\r\n    constructor(private _ele: Ele, private _pos: Point) {\r\n        this._ele.style.display = \"block\";\r\n        this._ele.style.position = \"absolute\";\r\n        this.setPos(this._pos);\r\n\r\n        let move = (e)=>this._onMouseMove(e);\r\n        let down = (e)=> this._onMouseDown(e);\r\n        let up = (e)=> this._onMouseUp(e);\r\n\r\n        this._ele.target.addEventListener(\"mousemove\", move);\r\n        this._ele.target.addEventListener(\"mousedown\", down);\r\n        this._ele.target.addEventListener(\"mouseup\", up);\r\n    }\r\n\r\n    setPos(pos: Point) {\r\n        this._ele.style.left = pos.x + this._px;\r\n        this._ele.style.top = pos.y + this._px;\r\n    }\r\n\r\n    private _onMouseMove(e:MouseEvent) {\r\n        let oldMousePos = this._mousePos.copy();\r\n        this._mousePos.updateFromMouseEvent(e);\r\n\r\n        if (this._dragging) {\r\n            let delta = this._mousePos.subtract(oldMousePos);\r\n            this._pos.bumpBy(delta);\r\n            this.setPos(this._pos);\r\n\r\n            if (this._timerHandle !== -1) { clearTimeout(this._timerHandle); }\r\n\r\n            this._timerHandle = setTimeout(()=>this._dragTimeout(), 100);\r\n            this._velocityAverager.push(delta);\r\n        }\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    private _onMouseDown(e:MouseEvent) {\r\n        this._dragging = true;\r\n        this._velocityAverager.clear();\r\n        this._velocity = new Point();\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    private _onMouseUp(e:MouseEvent) {\r\n        this._dragging = false;\r\n        this._velocity = this._velocityAverager.average;\r\n        if (this._timerHandle !== -1) { clearTimeout(this._timerHandle); }\r\n        this._timerHandle = setInterval(() => this._coast(), 13);\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    private _dragTimeout() {\r\n        this._velocityAverager.clear();\r\n    }\r\n\r\n    private _coast() {\r\n        let xVel = Math.abs(this._velocity.x);\r\n        let yVel = Math.abs(this._velocity.y);\r\n\r\n        if (xVel < 0.01 && yVel < 0.01) {\r\n            clearInterval(this._timerHandle);\r\n            this._timerHandle = -1;\r\n            this._velocity = new Point(0,0);\r\n        } else {\r\n            this._pos.bumpBy(this._velocity);\r\n            this.setPos(this._pos);\r\n            this._velocity.x *= 0.95;\r\n            this._velocity.y *= 0.95;\r\n        }\r\n    }\r\n\r\n    private readonly _px = \"px\";\r\n    private _mousePos: Point = new Point(0,0);\r\n    private _dragging: boolean = false;\r\n\r\n    // todo: the \"coast\" function is copied between here and axis-ele.ts. Need to combine these so we don't repeat the code.\r\n    private _timerHandle = -1;\r\n    private _velocity: Point = new Point(0,0);\r\n    private _velocityAverager = new PointAverager();\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ele-dragger.ts","\r\nimport {Ele} from \"./ele\";\r\nimport {Point} from \"./point\"\r\nimport { Zoom1d } from \"./zoom1d\";\r\n\r\nexport class EleZoomer {\r\n\r\n    get size(): Point { return this._size; }\r\n\r\n    constructor(private _ele: Ele, private _pos: Point) {\r\n        this._ele.style.display = \"block\";\r\n        this._ele.style.position = \"absolute\";\r\n\r\n        this._ele.target.addEventListener(\"mousemove\", (e)=>this._onMouseMove(e));\r\n        this._ele.target.addEventListener(\"wheel\", (e)=>this._onMouseWheel(e));\r\n    }\r\n\r\n    setSize(size: Point) {\r\n        this._size = size;\r\n        this._ele.style.width = size.x + this._px;\r\n        this._ele.style.height = size.y + this._px;\r\n    }\r\n\r\n    private _onMouseMove(e:MouseEvent) {\r\n        this._mousePos.updateFromMouseEvent(e);\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    private _onMouseWheel(e:WheelEvent) {\r\n        let delta = (e.deltaY > 0) ? 1.1 : 0.9;\r\n        this.zoom(delta, this._mousePos);\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    zoom(zoomRatio: number, zoomPoint: Point) {\r\n\r\n        let x = this._mousePos.x;\r\n        let y = this._mousePos.y;\r\n\r\n        let x1 = this._pos.x;\r\n        let y1 = this._pos.y;\r\n\r\n        let x2 = x1 + this.size.x;\r\n        let y2 = y1 + this.size.y;\r\n\r\n        let newX1X2 = Zoom1d.zoom(x, x1, x2, zoomRatio);\r\n        let newY1Y2 = Zoom1d.zoom(y, y1, y2, zoomRatio);\r\n\r\n        this._pos.x = newX1X2[0];\r\n        this._pos.y = newY1Y2[0];\r\n        this._setPos(this._pos);\r\n        \r\n        this.size.x = newX1X2[1] - newX1X2[0];\r\n        this.size.y = newY1Y2[1] - newY1Y2[0];\r\n        this.setSize(this.size);\r\n    }\r\n\r\n    private _setPos(pos: Point) {\r\n        this._ele.style.left = pos.x + this._px;\r\n        this._ele.style.top = pos.y + this._px;\r\n    }\r\n\r\n    private _size: Point = new Point(0, 0);\r\n    private _mousePos: Point = new Point(0,0);\r\n    private readonly _px = \"px\";\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/ele-zoomer.ts","\r\nexport class Zoom1d {\r\n    static zoom(zoomPoint, leftEdge, rightEdge, zoomPercent): Array<number> {\r\n        let delta;\r\n        let newLeftEdge;\r\n        let newRightEdge;\r\n\r\n        let newWidth = (rightEdge - leftEdge) * zoomPercent;\r\n\r\n        if (leftEdge > zoomPoint) {   // Zoom object is to the right of x.\r\n            delta = leftEdge - zoomPoint;\r\n            newLeftEdge = zoomPoint + (delta * zoomPercent);\r\n            newRightEdge = newLeftEdge + newWidth;\r\n        } else if (zoomPoint > rightEdge) {    // Zoom object is to the left of x.\r\n            delta = zoomPoint - rightEdge;\r\n            newRightEdge = zoomPoint - (delta * zoomPercent);\r\n            newLeftEdge = newRightEdge - newWidth;\r\n        } else { // Zoom object straddles x.\r\n            let left = zoomPoint - leftEdge;\r\n            let right = rightEdge - zoomPoint;\r\n            let newLeft = left * zoomPercent;\r\n            let newRight = right * zoomPercent;\r\n            newLeftEdge = zoomPoint - newLeft;\r\n            newRightEdge = zoomPoint + newRight;\r\n        }\r\n\r\n        return [newLeftEdge, newRightEdge];\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/zoom1d.ts","\r\nimport {Ele} from \"./ele\";\r\n\r\nexport class DivEle extends Ele {\r\n    constructor() {\r\n        super();\r\n        this.target = document.createElement(\"div\");\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/div-ele.ts","\r\nimport {TextInputEle} from \"./lib/text-input-ele\";\r\nimport {ButtonEle} from \"./lib/button-ele\";\r\nimport {ImgEle} from \"./lib/img-ele\";\r\nimport {ImgDragZoomEle, ImgDragZoomEleModel} from \"./lib/img-drag-zoom-ele\";\r\nimport {VideoEle} from \"./lib/video-ele\";\r\nimport {VideoDragZoomEle} from \"./lib/video-drag-zoom-ele\";\r\nimport {AxisEle} from \"./lib/axis-ele\";\r\nimport {WebApp} from \"./lib/web-app\";\r\nimport {Model} from \"./lib/model\";\r\n\r\nimport {Controls} from \"./controls\";\r\n\r\nclass WebImgApp extends WebApp {\r\n    \r\n    cookieName = \"web-img-save-data\";\r\n\r\n    private _removeImgEle: (imgToRemove: ImgEle) => void = (imgToRemove: ImgEle)=>this._axis.removeChild(imgToRemove);\r\n    private _axis = new AxisEle();\r\n    private _controls = new Controls(this.cookieName, this._axis, this._removeImgEle);\r\n    \r\n    constructor() {\r\n        super();\r\n\r\n        this.addChildren([\r\n            this._axis,\r\n            this._controls,\r\n        ]);\r\n\r\n        window.addEventListener(\"paste\", (e) => this._onPaste(e));\r\n        window.addEventListener(\"keydown\", (e: KeyboardEvent)=> this.toggleControls(e));\r\n    }\r\n\r\n    private _onPaste(e: any) {\r\n        let src: string = e.clipboardData.getData(\"text/plain\");\r\n        if (src.length === 0) { return; }\r\n        \r\n        let dotIdx = src.lastIndexOf(\".\");\r\n        if (dotIdx < 0) { return; }\r\n\r\n        let extension = src.substr(dotIdx + 1);\r\n\r\n        let imgExtensions = [\r\n            \"gif\",\r\n            \"jpg\",\r\n            \"jpeg\",\r\n            \"png\",\r\n        ];\r\n\r\n        //if (imgExtensions.filter(s => s === extension).length === 1) {\r\n        if (imgExtensions.filter(s => src.includes(s)).length ===1) {\r\n            this._axis.addDragZoomEle(new ImgDragZoomEle(src, this._removeImgEle));\r\n            return;\r\n        }\r\n        \r\n        let vidExtensions = [\r\n            \"mp4\",\r\n            \"webm\"\r\n        ];\r\n\r\n        if (vidExtensions.filter(s => s === extension).length === 1) {\r\n            this._axis.addDragZoomEle(new VideoDragZoomEle(src, (videoToRemove: VideoEle)=>this.removeChild(videoToRemove)));\r\n        }\r\n    }\r\n\r\n    private toggleControls(e: KeyboardEvent) {\r\n        if (e.key !== \" \") { return; }\r\n\r\n        if (this._controls.target.style.display === \"none\") {\r\n            this._controls.target.style.display = \"block\";\r\n        } else {\r\n            this._controls.target.style.display = \"none\";\r\n        }\r\n    }\r\n}\r\n\r\nwindow.onload = () => {\r\n    try {\r\n        new WebImgApp();\r\n    } catch (e) {\r\n        console.error(e);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app.ts","\r\nimport {Ele} from \"./ele\";\r\nimport {Model} from \"./model\";\r\n\r\nexport class ImgEle extends Ele {\r\n\r\n    public get imgElement(): HTMLImageElement { return this.target as HTMLImageElement }\r\n    public set src(src: string) { \r\n        if (src === null) {\r\n            this.imgElement.style.display = \"hidden\";\r\n        } else {\r\n            this.imgElement.style.display = \"block\";\r\n            this.imgElement.src = src; \r\n        }\r\n    }\r\n    \r\n    constructor(src: string = null, private _onRemoved: (i: ImgEle) => void) {\r\n        super();\r\n        this.target = document.createElement(\"img\");\r\n        this.src = src;\r\n\r\n        this.imgElement.addEventListener(\"contextmenu\", (e)=>this._onContextMenu(e));\r\n    }\r\n\r\n    toModel(): Model {\r\n        return new ImgEleModel(this.imgElement.src);\r\n    }\r\n\r\n    private _onContextMenu(e: MouseEvent) {\r\n        this._onRemoved(this);\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n}\r\n\r\nexport class ImgEleModel extends Model {\r\n    constructor(public src: string) {\r\n        super();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/img-ele.ts","\r\nimport {VideoEle} from \"./video-ele\";\r\nimport {Point} from \"./point\"\r\n\r\nimport {EleDragger} from \"./ele-dragger\";\r\nimport {EleZoomer} from \"./ele-zoomer\";\r\n\r\nexport class VideoDragZoomEle extends VideoEle {\r\n    get pos(): Point { return this._pos; }\r\n    dragger: EleDragger;\r\n    zoomer: EleZoomer;\r\n\r\n    constructor(src: string = null, onRemoved: (i: VideoEle) => void) {\r\n        super(src, onRemoved);\r\n\r\n        this._pos = new Point(0, 0);\r\n        this.dragger = new EleDragger(this, this._pos);\r\n        this.zoomer = new EleZoomer(this, this._pos);\r\n\r\n        this.videoElement.addEventListener(\"loadeddata\", ()=>this._onLoaded());\r\n    }\r\n\r\n    private _onLoaded() {\r\n        this.zoomer.setSize(new Point(this.videoElement.videoWidth, this.videoElement.videoHeight));\r\n    }\r\n\r\n    private _pos: Point;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/video-drag-zoom-ele.ts","\r\nimport {Ele} from \"./ele\";\r\n\r\nexport class VideoEle extends Ele {\r\n    public get videoElement(): HTMLVideoElement { return this.target as HTMLVideoElement; }\r\n    public set src(src: string) {\r\n        if (src === null) {\r\n            this.videoElement.style.display = \"hidden\";\r\n        } else {\r\n            this.videoElement.style.display = \"block\";\r\n            this.videoElement.src = src; \r\n            //this.videoElement.autoplay = true;\r\n            this.videoElement.controls = true;\r\n            this.videoElement.loop = true;\r\n            this.videoElement.playbackRate = 1.0;\r\n        }\r\n    }\r\n\r\n    constructor(src: string = null, private _onRemoved: (i: VideoEle) => void) {\r\n        super();\r\n        this.target = document.createElement(\"video\");\r\n        this.src = src;\r\n        this.videoElement.addEventListener(\"contextmenu\", (e)=>this._onContextMenu(e));\r\n    }\r\n\r\n    private _onContextMenu(e: MouseEvent) {\r\n        this._onRemoved(this);\r\n        e.preventDefault();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/video-ele.ts","\r\nimport { DivEle } from \"./div-ele\";\r\nimport { Point, PointAverager } from \"./point\";\r\nimport { ImgDragZoomEle } from \"./img-drag-zoom-ele\";\r\nimport { VideoDragZoomEle } from \"./video-drag-zoom-ele\";\r\nimport { Zoom1d } from \"./zoom1d\";\r\n\r\n/**\r\n * The intent of this element is to fill the whole screen and allow child elemements to\r\n * be drug around google maps style... but without the tile-loading nature.\r\n *\r\n * When a veil is placed over all the images mouse drags and zooms affect all images. When the veil is behind all the\r\n * images mouse drags and zooms when over an image affect only that image (position and size individual images).\r\n */\r\nexport class AxisEle extends DivEle {\r\n\r\n    private toggleIndividualImgZoomKey = \"a\";\r\n\r\n    constructor() {\r\n        super();\r\n        this._setupStyle();\r\n        this._setupVeil();\r\n        this._setupKeyDownEventListener();\r\n    }\r\n\r\n    private _setupStyle() {\r\n        this.target.classList.add(\"axis-ele\");\r\n    }\r\n\r\n    private _setupVeil() {\r\n        this._setupVeilStyle();\r\n        this._createVeilEventListeners();\r\n\r\n        this.addUntrackedChild(this._veil);\r\n    }\r\n\r\n    private _setupVeilStyle() {\r\n        this._veil.target.classList.add(\"axis-veil-ele\");\r\n        this._veil.style.zIndex = \"6\";\r\n    }\r\n\r\n    private _createVeilEventListeners() {\r\n        this._veil.target.addEventListener(\"mousedown\", (e) => this._mouseDown(e));\r\n        this._veil.target.addEventListener(\"mouseup\", (e) => this._mouseUp(e));\r\n        this._veil.target.addEventListener(\"mousemove\", (e) => this._mouseMove(e));\r\n        this._veil.target.addEventListener(\"wheel\", (e) => this._mouseWheel(e));\r\n        this._veil.target.addEventListener(\"contextmenu\", (e) => this._onContextMenu(e));\r\n    }\r\n\r\n    private _setupKeyDownEventListener() {\r\n        window.addEventListener(\"keydown\", (e: KeyboardEvent) => {\r\n            if (e.key === this.toggleIndividualImgZoomKey) {\r\n                if (this._veil.style.zIndex === \"6\") {\r\n                    this._veil.style.zIndex = \"1\";\r\n                } else {\r\n                    this._veil.style.zIndex = \"6\";\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    addDragZoomEle(child: ImgDragZoomEle | VideoDragZoomEle) {\r\n        super.addChild(child);\r\n    }\r\n\r\n    _mouseDown(e: MouseEvent) {\r\n        this._dragging = true;\r\n        this._velocityAverager.clear();\r\n        this._velocity = new Point();\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    _mouseUp(e: MouseEvent) {\r\n        this._dragging = false;\r\n        this._velocity = this._velocityAverager.average;\r\n        if (this._timerHandle !== -1) { clearTimeout(this._timerHandle); }\r\n        this._timerHandle = setInterval(() => this._coast(), 13);\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    _mouseMove(e: MouseEvent) {\r\n        let oldMousePos = this._mousePos.copy();\r\n        this._mousePos.updateFromMouseEvent(e);\r\n\r\n        if (this._dragging) {\r\n            let delta = this._mousePos.subtract(oldMousePos);\r\n            this.children.forEach((child: ImgDragZoomEle | VideoDragZoomEle) => {\r\n                child.pos.bumpBy(delta);\r\n                child.dragger.setPos(child.pos);\r\n            });\r\n\r\n            if (this._timerHandle !== -1) { clearTimeout(this._timerHandle); }\r\n            this._timerHandle = setTimeout(()=>this._dragTimeout(), 100);\r\n            this._velocityAverager.push(delta);\r\n        }\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    private _dragTimeout() {\r\n        this._velocityAverager.clear();\r\n    }\r\n\r\n    private _coast() {\r\n        let xVel = Math.abs(this._velocity.x);\r\n        let yVel = Math.abs(this._velocity.y);\r\n\r\n        if (xVel < 0.01 && yVel < 0.01) {\r\n            clearInterval(this._timerHandle);\r\n            this._timerHandle = -1;\r\n            this._velocity = new Point(0,0);\r\n        } else {\r\n            this.children.forEach((child: ImgDragZoomEle | VideoDragZoomEle) => {\r\n                child.pos.bumpBy(this._velocity);\r\n                child.dragger.setPos(child.pos);\r\n            });\r\n            this._velocity.x *= 0.95;\r\n            this._velocity.y *= 0.95;\r\n        }\r\n    }\r\n\r\n    _mouseWheel(e: WheelEvent) {\r\n        let zoom = (e.deltaY < 0) ? 1.1 : 0.9;\r\n\r\n        this.children.forEach((child: ImgDragZoomEle | VideoDragZoomEle) => {\r\n            this._zoomChild(child, zoom);\r\n        });\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    private _zoomChild(child: ImgDragZoomEle | VideoDragZoomEle, zoomPercent: number) {\r\n        let x = this._mousePos.x;\r\n        let y = this._mousePos.y;\r\n\r\n        let x1 = child.pos.x;\r\n        let y1 = child.pos.y;\r\n\r\n        let x2 = x1 + child.zoomer.size.x;\r\n        let y2 = y1 + child.zoomer.size.y;\r\n\r\n        let newX1X2 = Zoom1d.zoom(x, x1, x2, zoomPercent);\r\n        //noinspection JSSuspiciousNameCombination\r\n        let newY1Y2 = Zoom1d.zoom(y, y1, y2, zoomPercent);\r\n\r\n        child.pos.x = newX1X2[0];\r\n        child.pos.y = newY1Y2[0];\r\n\r\n        child.dragger.setPos(child.pos);\r\n\r\n        child.zoomer.size.x = newX1X2[1] - newX1X2[0];\r\n        child.zoomer.size.y = newY1Y2[1] - newY1Y2[0];\r\n        child.zoomer.setSize(child.zoomer.size);\r\n    }\r\n\r\n    //noinspection JSMethodCanBeStatic\r\n    private _onContextMenu(e: MouseEvent) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    }\r\n\r\n    _mousePos: Point = new Point();\r\n    _dragging: boolean = false;\r\n    _veil: DivEle = new DivEle();\r\n\r\n    // todo: the \"coast\" function is copied between here and ele-dragger.ts. Need to combine these so we don't repeat the code.\r\n    private _timerHandle = -1;\r\n    private _velocity: Point = new Point(0,0);\r\n    private _velocityAverager = new PointAverager();\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/axis-ele.ts","\r\nimport {Ele} from \"./ele\";\r\n\r\nexport class WebApp {\r\n    \r\n    constructor() {}\r\n    \r\n    addChildren(children: Array<Ele>) {\r\n        children.forEach((child: Ele) => this.addChild(child));\r\n    }\r\n\r\n    addChild(child: Ele) {\r\n        this._children.push(child);\r\n        window.document.body.appendChild(child.target);\r\n    }\r\n\r\n    removeChild(child: Ele) {\r\n        let childIndex = this._children.indexOf(child);\r\n        if (childIndex < 0) { throw new Error(\"Attempted to remove unknown child\"); }\r\n        this._children.splice(childIndex, 1);\r\n        window.document.body.removeChild(child.target);\r\n        child = null;\r\n        console.log(\"num web app children: \" + this._children.length);\r\n    }\r\n\r\n    private _children: Array<Ele> = [];\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/web-app.ts","\r\nimport {DivEle} from \"./lib/div-ele\";\r\nimport {ButtonEle} from \"./lib/button-ele\"; \r\nimport {TextAreaEle} from \"./lib/text-area-ele\";\r\nimport {AxisEle} from \"./lib/axis-ele\";\r\nimport {ImgEle} from \"./lib/img-ele\";\r\nimport {ImgDragZoomEle, ImgDragZoomEleModel} from \"./lib/img-drag-zoom-ele\";\r\nimport {Model} from \"./lib/model\";\r\n\r\nexport class Controls extends DivEle {\r\n\r\n    constructor(public cookieName: string, public axis: AxisEle, public onRemove: (imgToRemove: ImgEle) => void) {\r\n        super();\r\n\r\n        this.target.classList.add(\"controls\");\r\n        this.style.display = \"none\";\r\n\r\n        this._textArea.textAreaElement.cols = 100;\r\n        this._textArea.textAreaElement.rows = 5;\r\n        this._textArea.text = localStorage[cookieName];\r\n        \r\n        let textContainer = new DivEle();\r\n        textContainer.style.padding = \"10px\";\r\n        textContainer.addChild(this._textArea);\r\n\r\n        let buttonContainer = new DivEle();\r\n        buttonContainer.style.padding = \"10px\";\r\n        buttonContainer.addChildren([\r\n            new ButtonEle(\"Apply JSON\", ()=> this.applyJSON()),\r\n            new ButtonEle(\"Save Chagnes\", ()=> this.saveChanges())\r\n        ]);\r\n        \r\n        this.addChildren([\r\n            textContainer,\r\n            buttonContainer\r\n        ]);\r\n    }\r\n\r\n    private applyJSON() {\r\n        let newJSON = this._textArea.text;\r\n\r\n        if (newJSON.length === 0) { newJSON = \"[]\"; }\r\n\r\n        let models: Array<Model>;\r\n        try {\r\n            models = JSON.parse(newJSON);\r\n        } catch (e) {\r\n            alert(\"Failed to parse JSON: \" + e);\r\n        }\r\n\r\n        // ugly.\r\n        while(this.axis.children.length > 0) {\r\n            this.axis.children[0].removeChild(this.axis.children[0]);\r\n        }\r\n\r\n        models.forEach((model: ImgDragZoomEleModel) => {\r\n            let ele: ImgDragZoomEle = ImgDragZoomEle.fromModel(model, this.onRemove);\r\n            this.axis.addChild(ele);\r\n        });\r\n    }\r\n\r\n    private saveChanges() {\r\n        let models: Array<Model> = [];\r\n        this.axis.children.forEach((child: ImgDragZoomEle) => {\r\n            models.push(child.toModel());\r\n        });\r\n\r\n        // alert(JSON.stringify(models));\r\n        localStorage[this.cookieName] = JSON.stringify(models);\r\n    }\r\n\r\n    private _textArea: TextAreaEle = new TextAreaEle();\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/controls.ts","import {Ele} from \"./ele\";\r\n\r\nexport class ButtonEle extends Ele {\r\n    \r\n    public get buttonElement(): HTMLButtonElement { return this.target as HTMLButtonElement; }\r\n\r\n    constructor(buttonText: string, private _onClicked: () => void) {\r\n        super();\r\n        this.target = document.createElement(\"button\");\r\n        this.buttonElement.innerHTML = buttonText;\r\n        this.buttonElement.onclick = this._onClicked;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/button-ele.ts","\r\nimport {Ele} from \"./ele\";\r\n\r\nexport class TextAreaEle extends Ele {\r\n\r\n    get textAreaElement(): HTMLTextAreaElement { return this.target as HTMLTextAreaElement;}\r\n    get text(): string { return this.textAreaElement.value; }\r\n    set text(t: string) {\r\n        this.textAreaElement.value = t;\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n        this.target = document.createElement(\"textarea\");\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/text-area-ele.ts"],"sourceRoot":""}